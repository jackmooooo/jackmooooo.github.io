<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>No Misclicks</title>
	<script src="jquery.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

	<style>
		body {
			color: red;
		}
	    [class="newbox"] {
	    	text-align: center;
	        background-color: darkblue;
	        width: 4000px;
	        height: 2000px;
	        font-size: 500%;
	        color: red;
	    }
		[class="box"] {
			display: block;
			position: absolute;
			width: 70px;
			height: 70px;
			top: 100px;
			left: 0px;
			background-color: red;
			color: orange;
			font-size: 300%;
			text-align: center;
		}
	</style>

</head>
<body class="board">
    <div class="newbox"></div>
	<div class="box">0</div>
	
	<script>
	(function(){
			'use strict';
			/* global $*/
			var box;
			var newbox;
			var dead;
			var boardWidth;
			var boardheight;
			var update;
			var handleBoxClick;
			var handeNewBoxClick;
			var one;
			var position;
			var points;
			var speed;
			var yorn;
			var yes;
			var no;
			var checkpoints;
			
			one = 0.05;
			position = 0;
			points = 0;
			speed = 2;
			dead = "no misclicks";
			yes = ["y","Y","yes","Yes","yEs","YEs","yeS","YeS","yES","YES","y3s","Y3s","y3S","Y3S"];
			no = ["n","N","no","No","nO","NO","n0","N0"];
			checkpoints = [25,50,75,100,150,200];
			
			box = $('.box');
			newbox = $('.newbox');
			boardWidth = $('.board').width();
			boardheight = $('.board').height();
			
			box.css('left', position);
			newbox.css('width',boardWidth);
			newbox.css('height',boardheight);
			box.text(points);
			newbox.text(dead);
			
			setInterval(update,20);
		    
			update = function() {
			    position = position + speed;
			    if (position > boardWidth - 50) {
			        speed = speed * -1;
			        one = -0.05;
			    } else if (position < 0) {
			        speed = speed * -1;
			        one = 0.05;
			    }
			    box.css('left',position);
			};
			box.on('click', handleBoxClick);
			
			handleBoxClick = function() {
			    points = points + 1;
			    box.text(points);
			    speed = speed + one;
			    if (points%2 === 0) {
			    	newbox.css('background-color', "red");
			    	newbox.css('color', "darkblue");
			    	box.css('background-color', "darkblue");
			    } else {
			    	newbox.css('background-color', "darkblue");
			    	newbox.css('color', "red");
			    	box.css('background-color', "red");
			    }
			    if (checkpoints.includes(points)) {
			    	confirm("Nice you got to a score of" + points);
			    }
			};
			box.on('click',handleBoxClick);
			
			newbox.on('click',handeNewBoxClick);
			
			handeNewBoxClick = function() {
			    if (dead === "no misclicks") {
			        dead = 1;
			    } else if (dead > 7) {
			        confirm("CONGRATULATIONS YOU GOT A SCORE OF " + points);
			        yorn = prompt("YOU HAVE DIED. do you want to restart? (Y or N).");
			        if (yes.includes(yorn)) {
			            dead = "no misclicks";
			            newbox.text(dead);
			            box.css('left',0);
			            box.text(0);
			            speed = 2;
			            points = 0;
			            function clearAllValues() {
	                        var oCR = cognos.Report.getReport("_THIS_");
	                        var aControls = oCR.prompt.getControls();
	                        for (var i = 0; i < aControls.length; i++) {
		                        aControls[i].clearValues();
	                        }
			            }
                    } else if (no.includes(yorn)) {
                        speed = 0;
                        one = 0;
                        box.text("reload the page if you meant yes");
                    } else {
                    	speed = 0;
                    	one = 0;
                    	box.text("reload the page");
                    	newbox.text("reload the page");
                    }
			    } else {
			    dead = dead + 1;
			    newbox.text(dead);
			    }
			};
			newbox.on('click',handeNewBoxClick);
			setInterval(update, 20);
		})();
	</script>
</body>
</html>